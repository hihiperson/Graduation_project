<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ppw.graduation.project.model.mapper.ShowConsumablesMapper">

    <resultMap id="BaseResultMap" type="com.ppw.graduation.project.model.entity.ShowConsumables" >
        <id column="cid" property="cid" jdbcType="INTEGER" />
        <result column="name" property="name" jdbcType="VARCHAR" />
        <result column="num" property="num" jdbcType="INTEGER" />
        <result column="frequency" property="frequency" jdbcType="INTEGER" />
        <result column="is_active" property="isActive" jdbcType="TINYINT" />
        <!--组装当前类别的子类别-->
        <collection property="userDTOList" ofType="com.ppw.graduation.project.model.dto.UserDTO">
            <result column="user_id" property="userId" jdbcType="INTEGER"/>
            <result column="uname" property="uname" jdbcType="VARCHAR" />
            <result column="picture" property="picture" jdbcType="VARCHAR" />
        </collection>
    </resultMap>
    <select id="selectShowConsumablesList" resultMap="BaseResultMap">
        select consumables.cid,
            name,
            num,
            user_id,
            uname,
            `user`.picture,
            record_cons.frequency,
            consumables.is_active
        FROM
            consumables,
            user,
            detail_passed,
          record_cons
        WHERE
         consumables.cid = detail_passed.cid
        AND
          detail_passed.uid = user.user_id
        AND
          consumables.cid = record_cons.cid;
    </select>

</mapper>